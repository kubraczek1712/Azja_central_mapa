<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Plan podrÃ³Å¼y â€“ Azja Centralna</title>

<link rel="stylesheet"
href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
}
#map {
  height: 70vh;
}
.panel {
  padding: 12px;
  background: #f2f2f2;
}
label {
  display: block;
  margin-top: 8px;
  font-weight: bold;
}
input, button {
  width: 100%;
  padding: 8px;
  margin-top: 4px;
  font-size: 16px;
}
button {
  margin-top: 12px;
  background: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
}
</style>
</head>

<body>

<div id="map"></div>

<div class="panel">
  <label>ğŸ“… Data podrÃ³Å¼y â€“ od</label>
  <input type="date" id="dateFrom">

  <label>ğŸ“… Data podrÃ³Å¼y â€“ do</label>
  <input type="date" id="dateTo">

  <label>âœˆï¸ Wybrane lotnisko</label>
  <input type="text" id="airport" readonly placeholder="Kliknij lotnisko na mapie">

  <button onclick="sendPlan()">ğŸ“§ WyÅ›lij plan e-mailem</button>
</div>

<script>
const map = L.map('map').setView([43.5, 67], 4);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: 'Â© OpenStreetMap'
}).addTo(map);

const airports = [
  { name: "Astana â€“ NursuÅ‚tan Nazarbajew Intl. (Kazachstan)", coords: [51.022, 71.467] },
  { name: "Almaty Intl. (Kazachstan)", coords: [43.352, 77.040] },
  { name: "Taszkent Intl. (Uzbekistan)", coords: [41.257, 69.281] },
  { name: "Biszkek â€“ Manas Intl. (Kirgistan)", coords: [43.061, 74.477] },
  { name: "Duszanbe Intl. (TadÅ¼ykistan)", coords: [38.543, 68.825] },
  { name: "Aszchabad Intl. (Turkmenistan)", coords: [37.986, 58.361] }
];

airports.forEach(a => {
  L.marker(a.coords)
    .addTo(map)
    .bindPopup(a.name)
    .on('click', () => {
      document.getElementById('airport').value = a.name;
    });
});

function sendPlan() {
  const from = document.getElementById('dateFrom').value;
  const to = document.getElementById('dateTo').value;
  const airport = document.getElementById('airport').value;

  if (!from || !to || !airport) {
    alert("ProszÄ™ wybraÄ‡ datÄ™ OD, datÄ™ DO oraz lotnisko.");
    return;
  }

  if (from > to) {
    alert("Data 'od' nie moÅ¼e byÄ‡ pÃ³Åºniejsza niÅ¼ data 'do'.");
    return;
  }

  const email = "KUBRACZEK1712@GMAIL.COM"; // â† ZMIEÅƒ
  const subject = encodeURIComponent("Plan podrÃ³Å¼y â€“ Azja Centralna");
  const body = encodeURIComponent(
    `Plan podrÃ³Å¼y:\n\nOkres: ${from} â€“ ${to}\nLotnisko: ${airport}`
  );

  window.location.href = `mailto:${email}?subject=${subject}&body=${body}`;
}
</script>

</body>
</html>
